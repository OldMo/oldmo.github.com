---
layout: post
title: "SuperSocket学习笔记之一"
description: ""
category: 工作生涯
tags: ""
---
###开篇，为什么选了SuperSocket？
目前的项目开发中都需要用到TCP协议的SOCKET编程，建立服务器端接收网络数据，这个是我之前用接触的比较少的点，前一个项目被这个SOCKET编程折腾了好久，最后是通过修改网络的程序才基本解决这个问题，之所以说是基本解决，是因为该服务器在使用过程中还是出现一些不稳定的现象。目前的项目对于TCP服务器要求更高，因此自己在也考虑换一种方式实现服务器。刚开始研究时是想采用IOCP模型进行开发，但是试用了一下之后，一方面由于自己技术能力有限，另一方面是自己试用了一下发现针对自己的应用还是有一些问题。再请教其他公司的同学时，他提到了SuperSocket这个框架，之后开始尝试学习之，最初进去时感觉学习难度挺大，想过放弃，停了一段时间之后，还是决定继续扎进去学习如何使用。因此也就有了这篇学习笔记。  
####什么是SuperSocket？
这个网上可以百度到，在我看来就是这个由江大渔（牛人）开发的开源Socket框架，并且一直在升级优化同时提供使用中出现问题的答疑解惑的良心项目。使用这个框架进行socket编程，你可以不用去理解socket如何通信的细节（当然理解了就最好了，也应该去理解一下），根据文档就可以建立起自己的通信服务器，同时可以根据自己的需求进行拓展。如果有心，还可以研究源码去了解SS的实现机制，源码的风格也是非常优秀的，值得好好研究。总之，对于这个框架，就一个字“赞”。很多原理的东西我也说不是很透彻，可以参看这里[http://www.supersocket.net/](http://www.supersocket.net/)了解更详细的信息。 当然，使用这个框架时，必须要有一定的C#知识储备。

####SS使用记录
原理的东西认识的没有很透彻，我就根据自己学习使用过程中碰到的问题，学习到的知识做一个记录。  
先稍微讲一下我认识到的数据流动轨迹：  
1，客户端与服务器建立连接  
2，服务器监听并将一个连接封装成一个session  
3，通过接收过滤器（ReceiveFilter）对数据流进行格式化，形式command和value的格式
4，不同的command请求被对应的command执行。  

#####文档和代码例子的学习
这两项是学习SS必备的也是唯一的途径，边看文档边调例子，例子都调通了，基本的了解也就到位了。
例子一：Basic系列
要使用SS框架，必须引入SuperSocket.Common.dll, SuperSocket.SocketBase.dll, SuperSocket.SocketEngine.dll,log4net.dll到项目中，在对应的源码文件夹下的bin/Debug目录下可以找到这些dll文件。这个例子可以直接启动，可以根据自己的要求修改一下端口试试，启动好服务器端，就可以通过客户端测试了，哪里来的客户端？Telnet，不知道为什么有些人这个也不知道，直接找到telnet.exe运行即可。输入命令 open localhost 2012  就可以连上服务器了，这时就可以看例子的代码，边玩边调试。

之后还涉及到command的添加，SS中对数据的操作都由command来完成，不同的动作执行不同的command类，添加command类很简单。
这里要说一下StringRequestInfo类，这是经过ReceiveFilter处理后的数据格式，包含了（key,body,parameters),key就对应了command了，body是发送过来的后续所有信息，parameters是经过分割后的数组。


例子二：Medium系列
这里的例子涉及到了配置方式启动服务器的知识，跟上一个不同的是，这里的项目不能直接启动执行，需要先生成，然后都生成项目的Debug目录下找到SuperSocket.SocketService.exe文件执行程序结果。服务器的IP，端口信息全部在.config文件下进行设置。

这里涉及到了命令过滤器CommandFilter和连接过滤器ConnectionFilter的使用，同时对命令请求RequestInfoParser数据进行解析，并定义处理后StringRequestInfo的数据格式。


####未完待续
感觉这些都是文档中的内容，但是对于刚接触SS的人来说，还是有一点用，对于使用过的人基本上就是没有什么用处了。
下一篇写一下自己更具SS修改的项目。

